{"version":3,"sources":["components/TypingIndicator/index.module.css","components/UserList/index.module.css","components/MessageList/index.module.css","components/Message/index.module.css","components/FileInput/index.module.css","components/UserHeader/index.module.css","components/CreateMessageForm/index.module.css","components/RoomList/index.module.css","components/RoomHeader/index.module.css","components/CreateRoomForm/index.module.css","components/WelcomeScreen/index.module.css","components/JoinRoomScreen/index.module.css","components/UserHeader/index.js","components/UserList/index.js","components/Message/index.js","components/MessageList/index.js","components/TypingIndicator/index.js","components/FileInput/index.js","components/CreateMessageForm/index.js","components/RoomList/index.js","components/RoomHeader/index.js","components/CreateRoomForm/index.js","components/WelcomeScreen/index.js","components/JoinRoomScreen/index.js","config.js","chatkit.js","auth/auth.js","index.js"],"names":["module","exports","component","dots","ball-beat","online","empty","container","pulse","UserHeader","_ref","_ref$user","user","react_default","a","createElement","className","style","src","avatarURL","alt","name","id","concat","UserList","room","createConvo","current","removeUser","users","map","key","presence","state","onClick","e","order","Attachment","this","props","type","controls","link","href","download","React","Component","Message","message","sender","string","date","Date","minutes","getMinutes","getHours","time","createdAt","Linkify_default","properties","target","text","attachment","Message_Attachment","emptyList","role","aria-label","MessageList","_ref$messages","messages","Object","keys","length","reverse","k","x","TypingIndicator","_ref$typing","typing","slice","join","FileInput","_ref$state","xlinkHref","onChange","file","files","sendMessage","roomId","replace","CreateMessageForm","_ref$state$user","_ref$state$room","_ref$state$message","runCommand","actions","onSubmit","preventDefault","value","startsWith","placeholder","onInput","isTypingIn","FileInput_FileInput","unreads","arguments","undefined","read","readCursor","filter","position","RoomList","_ref$rooms","rooms","messageKeys","latestMessage","pop","firstUser","find","unreadMessages","lastMessage","parseInt","priority","unreadCount","disabled","joinRoom","match","isPrivate","includes","RoomHeader","sidebarOpen","userListOpen","_ref$actions","setSidebar","setUserList","CreateRoomForm","submit","private","elements","checked","WelcomeScreen","width","height","viewBox","fill","xmlns","d","fill-rule","clip-rule","JoinRoomScreen","auth0Domain","auth0ClientID","auth0RedirectUri","instanceLocator","url","accessToken","Auth","classCallCheck","auth0","WebAuth","domain","clientID","redirectUri","responseType","scope","login","bind","logout","handleAuthentication","isAuthenticated","getAuthToken","getUserId","expiresAt","JSON","parse","localStorage","getItem","getTime","authorize","idToken","jwtdecode","email","callback","_this","parseHash","err","authResult","setSession","console","log","alert","error","stringify","expiresIn","setItem","removeItem","Chat","src_Main","Loading","auth","authCallback","Authorizer","App","possibleConstructorReturn","getPrototypeOf","call","assertThisInitialized","hasHashToken","location","test","hash","authState","setState","src_Chat","userId","src_Loading","src_Authorizer","Main","window","innerWidth","_this2","setUser","setRoom","scrollToEnd","removeRoom","subscribeToRoom","setCursor","roomSubscriptions","hooks","onMessage","addMessage","createRoom","options","then","exists","addUserIds","addUserToRoom","_ref2","_ref2$roomId","removeUserFromRoom","_ref3","_ref3$roomId","leaveRoom","setReadCursor","forceUpdate","payload","messageId","set","showNotification","command","commands","invite","_ref4","slicedToArray","remove","_ref6","leave","_ref8","split","args","exec","catch","setTimeout","elem","document","querySelector","scrollTop","isTyping","notTyping","del","setUserPresence","senderId","visibilityState","Notification","body","icon","addEventListener","focus","requestPermission","ChatManager","tokenProvider","TokenProvider","connect","onUserStartedTyping","onUserStoppedTyping","onAddedToRoom","onRemovedFromRoom","onUserCameOnline","onUserWentOffline","Promise","all","_this$state","_this$actions","data-open","UserHeader_UserHeader","RoomList_RoomList","CreateRoomForm_CreateRoomForm","RoomHeader_RoomHeader","MessageList_MessageList","TypingIndicator_TypingIndicator","CreateMessageForm_CreateMessageForm","UserList_UserList","JoinRoomScreen_JoinRoomScreen","WelcomeScreen_WelcomeScreen","ReactDOM","render","Router","history","createBrowserHistory","Route","path","src_App","assign","getElementById"],"mappings":"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","file":"static/js/main.627522aa.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"TypingIndicator_component__zJe-E\",\"dots\":\"TypingIndicator_dots__fwZnf\",\"ball-beat\":\"TypingIndicator_ball-beat__-PO6d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserList_component__3wRjv\",\"online\":\"UserList_online__34X0u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"MessageList_component__38GGZ\",\"empty\":\"MessageList_empty__2fgfw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"Message_component__3-DsD\",\"online\":\"Message_online__3QiE_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FileInput_container___tE11\",\"component\":\"FileInput_component__13FhR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserHeader_component__14mC3\",\"pulse\":\"UserHeader_pulse__2gTzf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateMessageForm_component__3S1hD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomList_component__2734B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomHeader_component__2Xs8F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateRoomForm_component__3qxlM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"WelcomeScreen_component__2O8DZ\",\"pulse\":\"WelcomeScreen_pulse__QGuDP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"JoinRoomScreen_component__3uiTn\",\"pulse\":\"JoinRoomScreen_pulse__2ZHKw\"};","import React from 'react'\nimport style from './index.module.css'\n\nconst placeholder =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n\nexport const UserHeader = ({ user = {} }) => (\n  <header className={style.component}>\n    <img src={user.avatarURL || placeholder} alt={user.name} />\n    <div>\n      <h3>{user.name}</h3>\n      <h5>{user.id && `${user.id}`}</h5>\n    </div>\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const UserList = ({ room, current, createConvo, removeUser }) => (\n  <ul className={style.component}>\n    {room.users.map(user => (\n      <li\n        key={user.id}\n        className={user.presence.state === 'online' ? style.online : null}\n        onClick={e => createConvo({ user })}\n        style={{ order: user.presence.state === 'online' && -1 }}\n      >\n        <img src={user.avatarURL} alt={user.name} />\n        <p>{user.name}</p>\n      </li>\n    ))}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\nimport Linkify from 'react-linkify'\n\nconst time = string => {\n  const date = new Date(string)\n  const minutes = date.getMinutes()\n  return `${date.getHours()}:${minutes < 10 ? '0' + minutes : minutes}`\n}\n\nclass Attachment extends React.Component {\n  render() {\n    if(this.props.type === 'image'){\n      return  <img controls={true} src={this.props.link} alt={this.props.name} />\n    }\n    if(this.props.type === 'video'){\n      return <video controls={true} src={this.props.link} />\n    }\n    if(this.props.type === 'audio'){\n      return <audio controls={true} src={this.props.link} />\n    }\n    return <a href={this.props.link} download>Download File</a>\n  }\n}\n\nexport const Message = ({ user, createConvo }) => message =>\n  message.sender ? (\n    <li key={message.id} className={style.component}>\n      <img\n        onClick={e => createConvo({ user: message.sender })}\n        src={message.sender.avatarURL}\n        alt={message.sender.name}\n      />\n      <div>\n        <span\n          className={\n            message.sender.id === user.id ||\n            (message.sender.presence &&\n              message.sender.presence.state === 'online')\n              ? style.online\n              : null\n          }\n        >{`${message.sender.name} | ${time(message.createdAt)}`}</span>\n        <p>\n          <Linkify properties={{ target: '_blank' }}>{message.text}</Linkify>\n        </p>\n        {message.attachment ? (\n          <Attachment\n            link={message.attachment.link}\n            type={message.attachment.type}\n            name={message.attachment.name}\n          />\n        ) : null}\n      </div>\n    </li>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { Message } from '../Message'\n\nconst emptyList = (\n  <div className={style.empty}>\n    <span role=\"img\" aria-label=\"post\">\n      📝\n    </span>\n    <h2>No Messages Yet</h2>\n    <p>Be the first to post in this room or invite someone to join the room</p>\n  </div>\n)\n\nexport const MessageList = ({ messages = {}, user, createConvo }) => (\n  <ul id=\"messages\" className={style.component}>\n    {Object.keys(messages).length > 0 ? (\n      <wrapper->\n        {Object.keys(messages)\n          .reverse()\n          .map(k => Message({ user, createConvo })(messages[k]))}\n      </wrapper->\n    ) : (\n      emptyList\n    )}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nconst dots = (\n  <div className={style.dots}>{[0, 1, 2].map(x => <div key={x} />)}</div>\n)\n\nexport const TypingIndicator = ({ typing = {} }) =>\n  Object.keys(typing).length ? (\n    <div className={style.component}>\n      <div>{dots}</div>\n      <div>{`${Object.keys(typing)\n        .slice(0, 2)\n        .join(' and ')} is typing`}</div>\n    </div>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const FileInput = ({ state: { user, message, room } }) =>\n  room.id ? (\n    <div className={style.container}>\n      <svg>\n        <use xlinkHref=\"index.svg#attach\" />\n      </svg>\n      <input\n        className={style.component}\n        type=\"file\"\n        onChange={e => {\n          const file = e.target.files[0]\n          file &&\n            user.sendMessage({\n              text: message || file.name,\n              roomId: room.id,\n              attachment: {\n                name: file.name.replace(/[^A-Za-z0-9._-]/g, '--'),\n                file,\n              },\n            })\n        }}\n      />\n    </div>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { FileInput } from '../FileInput'\n\nexport const CreateMessageForm = ({\n  state: { user = {}, room = {}, message = '' },\n  actions: { runCommand },\n}) =>\n  room.id ? (\n    <form\n      className={style.component}\n      onSubmit={e => {\n        e.preventDefault()\n        const message = e.target[0].value\n        e.target[0].value = ''\n        message.startsWith('/')\n          ? runCommand(message.slice(1))\n          : message.length > 0 &&\n            user.sendMessage({\n              text: message,\n              roomId: room.id,\n            })\n      }}\n    >\n      <input\n        placeholder=\"Type a Message..\"\n        onInput={e => user.isTypingIn({ roomId: room.id })}\n      />\n      <FileInput state={{ user, room, message }} />\n      <button type=\"submit\">\n        <svg>\n          <use xlinkHref=\"index.svg#send\" />\n        </svg>\n      </button>\n    </form>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { dots } from '../TypingIndicator/index.module.css'\n\nconst Icon = id => (\n  <svg>\n    <use xlinkHref={`index.svg#${id}`} />\n  </svg>\n)\n\nconst unreads = (user, room, messages = {}) => {\n  const read = user.readCursor({ roomId: room.id })\n  return (\n    (read && Object.keys(messages).filter(x => x > read.position).length) ||\n    undefined\n  )\n}\n\nconst priority = (user, room, messages = {}) => {\n  const unreadMessages = unreads(user, room, messages) || 0\n  const lastMessage = Object.keys(messages).pop() || 0\n  return (10 * unreadMessages + parseInt(lastMessage)) * -1\n}\n\nexport const RoomList = ({\n  rooms = [],\n  user,\n  messages,\n  current,\n  typing,\n  actions,\n}) => (\n  <ul className={style.component}>\n    {rooms.map(room => {\n      const messageKeys = Object.keys(messages[room.id] || {})\n      const latestMessage =\n        messageKeys.length > 0 && messages[room.id][messageKeys.pop()]\n      const firstUser = room.users.find(x => x.id !== user.id)\n      const order = priority(user, room, messages[room.id])\n      const unreadCount = unreads(user, room, messages[room.id])\n      return (\n        <li\n          key={room.id}\n          disabled={room.id === current.id}\n          onClick={e => actions.joinRoom(room)}\n          style={{ order }}\n        >\n          {room.name.match(user.id) && firstUser ? (\n            <img src={firstUser.avatarURL} alt={firstUser.id} />\n          ) : (\n            Icon(room.isPrivate ? 'lock' : 'public')\n          )}\n          <col->\n            <p>{room.name.includes(user.id) ? firstUser.name : room.name}</p>\n            <span>{latestMessage && latestMessage.text}</span>\n          </col->\n          {room.id !== current.id && unreadCount ? (\n            <label>{unreadCount}</label>\n          ) : Object.keys(typing[room.id] || {}).length > 0 ? (\n            <div className={dots}>{[0, 1, 2].map(x => <div key={x} />)}</div>\n          ) : null}\n        </li>\n      )\n    })}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const RoomHeader = ({\n  state: { room, user, sidebarOpen, userListOpen },\n  actions: { setSidebar, setUserList },\n}) => (\n  <header className={style.component}>\n    <button onClick={e => setSidebar(!sidebarOpen)}>\n      <svg>\n        <use xlinkHref=\"index.svg#menu\" />\n      </svg>\n    </button>\n    <h1>{room.name && room.name.replace(user.id, '')}</h1>\n    {room.users && (\n      <div onClick={e => setUserList(!userListOpen)}>\n        <span>{room.users.length}</span>\n        <svg>\n          <use xlinkHref=\"index.svg#members\" />\n        </svg>\n      </div>\n    )}\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const CreateRoomForm = ({ submit }) => (\n  <form\n    className={style.component}\n    onSubmit={e => {\n      e.preventDefault()\n      submit({\n        name: e.target[0].value,\n        private: e.target.elements[2].checked,\n      })\n      e.target[0].value = ''\n    }}\n  >\n    <input placeholder=\"Create a Room\" />\n    <button>\n      <input type=\"checkbox\" />\n      <svg>\n        <use xlinkHref=\"index.svg#lock\" />\n      </svg>\n    </button>\n    <button type=\"submit\">\n      <svg>\n        <use xlinkHref=\"index.svg#add\" />\n      </svg>\n    </button>\n  </form>\n)\n","import React from \"react\";\nimport style from \"./index.module.css\";\n\nexport const WelcomeScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg\n          width=\"27\"\n          height=\"29\"\n          viewBox=\"0 0 27 29\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M10.6067 0L7.95502 1.52249L13.2584 4.56748L18.5617 1.52249L15.91 0L13.2584 1.52249L10.6067 0Z\"\n            fill=\"#FF8473\"\n          />\n          <path\n            d=\"M2.65167 4.56748L5.30335 3.04498L13.2584 7.61246L21.2134 3.04498L23.8651 4.56748L13.2584 10.6574L2.65167 4.56748Z\"\n            fill=\"#FF8473\"\n          />\n          <path\n            d=\"M7.95502 16.7474L5.30335 15.2249V18.2699L7.95502 19.7924V16.7474Z\"\n            fill=\"#FF8473\"\n          />\n          <path\n            fill-rule=\"evenodd\"\n            clip-rule=\"evenodd\"\n            d=\"M0 6.08997V21.3149L13.2584 28.9274V13.7024L0 6.08997ZM10.6067 15.2249V24.3599L2.65167 19.7924V10.6574L10.6067 15.2249Z\"\n            fill=\"#FF8473\"\n          />\n          <path\n            d=\"M15.91 12.1799V15.2249L26.5167 9.13495V6.08997L15.91 12.1799Z\"\n            fill=\"#FF8473\"\n          />\n          <path\n            d=\"M15.91 18.2699V21.3149L26.5167 15.2249V12.1799L15.91 18.2699Z\"\n            fill=\"#FF8473\"\n          />\n          <path\n            d=\"M15.91 24.3599V27.4049L26.5167 21.3149V18.2699L15.91 24.3599Z\"\n            fill=\"#FF8473\"\n          />\n        </svg>\n      </span>\n      <p>\n        Authenticating, subscribing to rooms\n        <br />\n        and fetching messages.\n      </p>\n    </div>\n  </section>\n);\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const JoinRoomScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg viewBox=\"0 0 59 80\">\n          <g>\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\n          </g>\n        </svg>\n      </span>\n      <p>\n        Join a room, create a room or click on a user avatar and start a\n        conversation.\n      </p>\n    </div>\n  </section>\n)\n","const auth0Domain = 'pusher-chatkit-demo.auth0.com'\nconst auth0ClientID = 'VF0kHM9szMj0aQGEfqafrdAKVwRb2a3Q'\nconst auth0RedirectUri = 'https://zmarkan.github.io/chatkit-sample-client'\n// const auth0RedirectUri = 'http://localhost:3000' /* Testing locally */\n\nconst chatkitTokenProviderEndpoint = 'https://zmarkan-chatkit-sample-server.glitch.me/token'\n\nconst chatkitInstanceLocator = 'v1:us1:7954c374-f491-4c08-b71e-5abfc0a3dc89'\n\nexport { auth0Domain, auth0ClientID, auth0RedirectUri, chatkitTokenProviderEndpoint, chatkitInstanceLocator }","import { ChatManager, TokenProvider } from '@pusher/chatkit-client'\nimport { chatkitTokenProviderEndpoint, chatkitInstanceLocator } from './config'\n\nconst credentials = {\n  url: (accessToken) =>\n    `${chatkitTokenProviderEndpoint}?token=${accessToken}`,\n  instanceLocator: chatkitInstanceLocator,\n}\n\nconst { instanceLocator, url } = credentials\nexport default ({ state, actions }, { id, accessToken }) => {   \n\n  console.log(`id: ${id}`)\n  new ChatManager({\n    tokenProvider: new TokenProvider({ url: url(accessToken) }),\n    instanceLocator,\n    userId: id,\n  })\n    .connect({\n      onUserStartedTyping: actions.isTyping,\n      onUserStoppedTyping: actions.notTyping,\n      onAddedToRoom: actions.subscribeToRoom,\n      onRemovedFromRoom: actions.removeRoom,\n      onUserCameOnline: actions.setUserPresence,\n      onUserWentOffline: actions.setUserPresence,\n    })\n    .then(user => {\n      // Subscribe to all rooms the user is a member of\n      console.log(\"subscribe to rooms\")\n\n      Promise.all(\n        user.rooms.map(room => {\n          \n          console.log(room)\n\n          return user.subscribeToRoom({\n            roomId: room.id,\n            hooks: { onMessage: actions.addMessage },\n          })\n        })\n      ).then(rooms => {\n        console.log(rooms)\n        actions.setUser(user)\n        // Join the first room in the users room list\n        user.rooms.length > 0 && actions.joinRoom(user.rooms[0])\n      })\n    })\n    .catch(error => console.log('Error on connection', error))\n\n  }","import auth0 from \"auth0-js\"\nimport jwtdecode from \"jwt-decode\"\nimport { auth0Domain, auth0ClientID, auth0RedirectUri } from \"../config\"\n\nexport default class Auth {\n\n  auth0 = new auth0.WebAuth({\n    domain: auth0Domain,\n    clientID: auth0ClientID,\n    redirectUri: auth0RedirectUri,\n\n    responseType: \"token id_token\",\n    scope: \"openid email profile\"\n  });\n\n  constructor() {\n    this.login = this.login.bind(this)\n    this.logout = this.logout.bind(this)\n    this.handleAuthentication = this.handleAuthentication.bind(this)\n    this.isAuthenticated = this.isAuthenticated.bind(this)\n    this.getAuthToken = this.getAuthToken.bind(this)\n    this.getUserId = this.getUserId.bind(this)\n  }\n\n  isAuthenticated() {\n    // Check whether the current time is past the \n    // Access Token's expiry time\n    let expiresAt = JSON.parse(localStorage.getItem('expires_at'));\n    return new Date().getTime() < expiresAt;\n  }\n\n  login() {\n    this.auth0.authorize();    \n  }\n\n  getAuthToken() {\n    return localStorage.getItem('access_token')\n  }\n\n  getUserId() { //Unsafe, not verified\n    const idToken = localStorage.getItem('id_token')\n    return jwtdecode(idToken).email\n  }\n\n  handleAuthentication(callback) {\n    this.auth0.parseHash((err, authResult) => {\n        if (authResult && authResult.accessToken && authResult.idToken) {\n            this.setSession(authResult);\n            const email = this.getUserId(authResult.idToken)\n            callback(authResult, email)\n        } else if (err) {\n          console.log(err);\n          alert(`Error: ${err.error}. Check the console for further details.`);\n        }\n      });  \n    }\n\n  setSession(authResult) {\n    // Set the time that the access token will expire at\n    let expiresAt = JSON.stringify((authResult.expiresIn * 1000) + new Date().getTime())\n    localStorage.setItem('access_token', authResult.accessToken)\n    localStorage.setItem('id_token', authResult.idToken)\n    localStorage.setItem('expires_at', expiresAt)\n  }\n\n  logout() {\n    // Clear Access Token and ID Token from local storage\n    localStorage.removeItem('access_token')\n    localStorage.removeItem('id_token')\n    localStorage.removeItem('expires_at')\n    localStorage.removeItem('chatkit_user')\n    //TODO: callback to reset the app state.\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { set, del } from 'object-path-immutable'\nimport './index.css'\n\nimport { UserHeader } from './components/UserHeader'\nimport { UserList } from './components/UserList'\nimport { MessageList } from './components/MessageList'\nimport { TypingIndicator } from './components/TypingIndicator'\nimport { CreateMessageForm } from './components/CreateMessageForm'\nimport { RoomList } from './components/RoomList'\nimport { RoomHeader } from './components/RoomHeader'\nimport { CreateRoomForm } from './components/CreateRoomForm'\nimport { WelcomeScreen } from './components/WelcomeScreen'\nimport { JoinRoomScreen } from './components/JoinRoomScreen'\nimport { Router, Route, Link } from \"react-router-dom\";\nimport createBrowserHistory from \"history/createBrowserHistory\";\n\n\nimport ChatManager from './chatkit'\n\nimport Auth from './auth/auth'\n\n// --------------------------------------\n// Application\n// --------------------------------------\n\nclass Chat extends React.Component {\n  render(){\n    return <Main {...this.props}/>\n  }\n}\n\nclass Loading extends React.Component {\n  //While login is happening\n  render() {\n    this.props.auth.handleAuthentication(this.props.authCallback)\n    return <h1>Loading...</h1>\n  }\n}\n\nclass Authorizer extends React.Component {\n  render(){\n    this.props.auth.login()\n    return <h1>Authorizing...</h1>\n  }\n  \n}\n\nclass App extends React.Component {\n\n  constructor(){\n    super()\n    this.auth = new Auth()\n    this.authCallback = this.authCallback.bind(this)\n    this.hasHashToken = this.hasHashToken.bind(this)\n  }\n\n  hasHashToken({location}) { return /access_token|id_token|error/.test(location.hash)}\n\n  authCallback(authState) {\n    this.setState(authState)\n  }\n\n  render() {\n\n    if(this.props.auth.isAuthenticated()) return(<Chat userId = {this.auth.getUserId()}/>)\n\n    if(this.hasHashToken(this.props)){\n      return(\n        <Loading  \n          auth = {this.props.auth}\n          authCallback = {this.authCallback} \n        />)\n    }\n    return(\n      <Authorizer \n        auth = {this.props.auth} \n        authCallback = {this.authCallback} \n      />)\n  }\n}\n\nclass Main extends React.Component {\n  state = {\n    user: {},\n    room: {},\n    messages: {},\n    typing: {},\n    sidebarOpen: false,\n    userListOpen: window.innerWidth > 1000,\n  }\n\n  actions = {\n    // --------------------------------------\n    // UI\n    // --------------------------------------\n\n    setSidebar: sidebarOpen => this.setState({ sidebarOpen }),\n    setUserList: userListOpen => this.setState({ userListOpen }),\n\n    // --------------------------------------\n    // User\n    // --------------------------------------\n\n    setUser: user => this.setState({ user }),\n\n    // --------------------------------------\n    // Room\n    // --------------------------------------\n\n    setRoom: room => {\n      this.setState({ room, sidebarOpen: false })\n      this.actions.scrollToEnd()\n    },\n\n    removeRoom: room => this.setState({ room: {} }),\n\n    joinRoom: room => {\n      this.actions.setRoom(room)\n      this.actions.subscribeToRoom(room)\n      this.state.messages[room.id] &&\n        this.actions.setCursor(\n          room.id,\n          Object.keys(this.state.messages[room.id]).pop()\n        )\n    },\n\n    subscribeToRoom: room =>\n      !this.state.user.roomSubscriptions[room.id] &&\n      this.state.user.subscribeToRoom({\n        roomId: room.id,\n        hooks: { onMessage: this.actions.addMessage },\n      }),\n\n    createRoom: options =>\n      this.state.user.createRoom(options).then(this.actions.joinRoom),\n\n    createConvo: options => {\n      if (options.user.id !== this.state.user.id) {\n        const exists = this.state.user.rooms.find(\n          x =>\n            x.name === options.user.id + this.state.user.id ||\n            x.name === this.state.user.id + options.user.id\n        )\n        exists\n          ? this.actions.joinRoom(exists)\n          : this.actions.createRoom({\n              name: this.state.user.id + options.user.id,\n              addUserIds: [options.user.id],\n              private: true,\n            })\n      }\n    },\n\n    addUserToRoom: ({ userId, roomId = this.state.room.id }) =>\n      this.state.user\n        .addUserToRoom({ userId, roomId })\n        .then(this.actions.setRoom),\n\n    removeUserFromRoom: ({ userId, roomId = this.state.room.id }) =>\n      userId === this.state.user.id\n        ? this.state.user.leaveRoom({ roomId })\n        : this.state.user\n            .removeUserFromRoom({ userId, roomId })\n            .then(this.actions.setRoom),\n\n    // --------------------------------------\n    // Cursors\n    // --------------------------------------\n\n    setCursor: (roomId, position) =>\n      this.state.user\n        .setReadCursor({ roomId, position: parseInt(position) })\n        .then(x => this.forceUpdate()),\n\n    // --------------------------------------\n    // Messages\n    // --------------------------------------\n\n    addMessage: payload => {\n\n      const roomId = payload.room.id\n      const messageId = payload.id\n      // Update local message cache with new message\n      this.setState(set(this.state, ['messages', roomId, messageId], payload))\n      // Update cursor if the message was read\n      if (roomId === this.state.room.id) {\n        const cursor = this.state.user.readCursor({ roomId }) || {}\n        const cursorPosition = cursor.position || 0\n        cursorPosition < messageId && this.actions.setCursor(roomId, messageId)\n        this.actions.scrollToEnd()\n      }\n      // Send notification\n      this.actions.showNotification(payload)\n    },\n\n    runCommand: command => {\n      const commands = {\n        invite: ([userId]) => this.actions.addUserToRoom({ userId }),\n        remove: ([userId]) => this.actions.removeUserFromRoom({ userId }),\n        leave: ([userId]) =>\n          this.actions.removeUserFromRoom({ userId: this.state.user.id }),\n      }\n      const name = command.split(' ')[0]\n      const args = command.split(' ').slice(1)\n      const exec = commands[name]\n      exec && exec(args).catch(console.log)\n    },\n\n    scrollToEnd: e =>\n      setTimeout(() => {\n        const elem = document.querySelector('#messages')\n        elem && (elem.scrollTop = 100000)\n      }, 0),\n\n    // --------------------------------------\n    // Typing Indicators\n    // --------------------------------------\n\n    isTyping: (room, user) =>\n      this.setState(set(this.state, ['typing', room.id, user.id], true)),\n\n    notTyping: (room, user) =>\n      this.setState(del(this.state, ['typing', room.id, user.id])),\n\n    // --------------------------------------\n    // Presence\n    // --------------------------------------\n\n    setUserPresence: () => this.forceUpdate(),\n\n    // --------------------------------------\n    // Notifications\n    // --------------------------------------\n\n    showNotification: message => {\n      if (\n        'Notification' in window &&\n        this.state.user.id &&\n        this.state.user.id !== message.senderId &&\n        document.visibilityState === 'hidden'\n      ) {\n        const notification = new Notification(\n          `New Message from ${message.sender.id}`,\n          {\n            body: message.text,\n            icon: message.sender.avatarURL,\n          }\n        )\n        notification.addEventListener('click', e => {\n          this.actions.joinRoom(message.room)\n          window.focus()\n        })\n      }\n    },\n  }\n\n  componentDidMount() {\n      'Notification' in window && Notification.requestPermission()\n    \n      let existingUser = { \n        id: this.props.userId, \n        accessToken: localStorage.getItem('access_token') \n      }\n\n      ChatManager(this, existingUser)\n  }\n\n  render() {\n    const {\n      user,\n      room,\n      messages,\n      typing,\n      sidebarOpen,\n      userListOpen,\n    } = this.state\n    const { createRoom, createConvo, removeUserFromRoom } = this.actions\n    return (\n      <main>\n        <aside data-open={sidebarOpen}>\n          <UserHeader user={user} />\n          <RoomList\n            user={user}\n            rooms={user.rooms}\n            messages={messages}\n            typing={typing}\n            current={room}\n            actions={this.actions}\n          />\n          {user.id && <CreateRoomForm submit={createRoom} />}\n        </aside>\n        <section>\n          <RoomHeader state={this.state} actions={this.actions} />\n          {room.id ? (\n            <row->\n              <col->\n                <MessageList\n                  user={user}\n                  messages={messages[room.id]}\n                  createConvo={createConvo}\n                />\n                <TypingIndicator typing={typing[room.id]} />\n                <CreateMessageForm state={this.state} actions={this.actions} />\n              </col->\n              {userListOpen && (\n                <UserList\n                  room={room}\n                  current={user.id}\n                  createConvo={createConvo}\n                  removeUser={removeUserFromRoom}\n                />\n              )}\n            </row->\n          ) : user.id ? (\n            <JoinRoomScreen />\n          ) : (\n            <WelcomeScreen />\n          )}\n        </section>\n      </main>\n    )\n  }\n}\n\n// --------------------------------------\n// Authentication\n// --------------------------------------\n\nconst auth = new Auth()\n\nReactDOM.render(\n    <Router history={createBrowserHistory()} >\n      <Route path=\"/\" render={(props) => <App auth={auth} {...props} />} />\n    </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}